spring.application.name=inscription-service

# Connexion à Eureka
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.instance.prefer-ip-address=true

# Connexion au Config Server
spring.config.import=optional:configserver:http://localhost:8888

# ==================================
# CONFIGURATION RESILIENCE4J
# ==================================

# 1. Configuration Actuator pour exposer les endpoints
management.endpoints.web.exposure.include=health,circuitbreakers,retries,metrics
management.endpoint.health.show-details=always

# 2. Configuration Resilience4J (Format .properties)

# --- Circuit Breaker ---
resilience4j.circuitbreaker.instances.userServiceCB.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.userServiceCB.slidingWindowSize=10
resilience4j.circuitbreaker.instances.userServiceCB.failureRateThreshold=50
resilience4j.circuitbreaker.instances.userServiceCB.waitDurationInOpenState=5000ms
resilience4j.circuitbreaker.instances.userServiceCB.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.userServiceCB.automaticTransitionFromOpenToHalfOpenEnabled=true

# --- Retry ---
resilience4j.retry.instances.userServiceRetry.maxAttempts=3
resilience4j.retry.instances.userServiceRetry.waitDuration=1000ms
# Liste des exceptions (format indexé pour .properties)
resilience4j.retry.instances.userServiceRetry.retryExceptions[0]=java.io.IOException
resilience4j.retry.instances.userServiceRetry.retryExceptions[1]=java.net.ConnectException